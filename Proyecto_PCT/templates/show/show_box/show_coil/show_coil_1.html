{% load static %}
{% csrf_token %}
<div class="container">
  <div class="row justify-content-center align-items-center">
    <div class="col-sm">
      <div class="computer_text_main" style="margin-top: 10px; margin-bottom: 10px; width: auto;">
        <h3 class="subtitulo" style="width: auto; padding: 0;">CAFE - {{opVoltage_coil_1}}</h3>
        <div id="divShowParamsCafe_1">
            <button id="showParamsCafe_1" class="css-button-eye" onclick="showParams_1()">
                <img src="{% static 'images/eye.svg' %}" alt="Icono">
            </button>
        </div>
        <div id="divHideParamsCafe_1" hidden>
            <button id="hideParamsCafe_1" class="css-button-eye" onclick="hideParams_1()">
                <img src="{% static 'images/eye-off.svg' %}" alt="Icono">
            </button>
        </div>
      </div>
      <div id="divParamsCafe_1" class="computer_text_main flex-column" style="margin-top: 10px; margin-bottom: 10px; width: 210px;" hidden>
        <table style="width: 100%;">
            <tr>
              <th>Config.</th>
              <th>Option</th>
            </tr>
            <tr>
              <td>Op. Voltage :</td>
              <td>{{opVoltage_coil_1}}</td>
            </tr>
            <tr>
              <td>Pulse Width :</td>
              <td>{{def_widthTime_coil_1}}</td>
            </tr>
            <!-- Agrega más filas según sea necesario -->
          </table>
      </div>
    </div>
  </div>
</div>

<div class="imagen-grande-container">
  <img id="img_coil_close_1" class="imagen-grande" style="max-height: 400px;" src="{% static 'images/closeNew.png' %}">
  <img id="img_coil_open_1" class="imagen-grande" style="max-height: 400px;"  src="{% static 'images/openNew.png' %}" hidden>
</div>

<div class="computer_text_main">

  <div class="row justify-content-center align-items-center">
    <div class="computer_text_main" style="padding: 5px; max-width: 540px;">
      <div id="ddAuto_manual_coil_1" class="dropdown" style="width: 115px; margin-right: 5px;">
        <select id="drive_1" class="form-select custom-bg-color" style="border-width: 3px; border-color: #143a51;">
          <option value="auto">Auto</option>
          <option value="manual">Manual</option>
        </select>
      </div> 
    </div>

    <div id="divButtons_coil_1" class="computer_text_main" style="width: auto; ">
        <div id="divStart_1"><button id="bStart_1" class="css-button-show" onclick="start_1()">Start</button></div>
        <div id="divStop_1"><button id="bStop_1" class="css-button-show" onclick="stop_1()">Stop</button></div>
        <div id="divOpen_1" hidden="hidden"><button id="bOpen_1" class="css-button-show" onclick="openn_1()">Open</button></div>
        <div id="divClose_1" hidden="hidden"><button id="bClose_1" class="css-button-show" onclick="closee_1()">Close</button></div>
    </div>
  </div>

</div>

<script>
  var divShowParamsCafe_1 = document.getElementById('divShowParamsCafe_1');
  var divHideParamsCafe_1 = document.getElementById('divHideParamsCafe_1');
  var divParamsCafe_1 = document.getElementById('divParamsCafe_1');

  var ddDrive_1 = document.getElementById('drive_1');
  var divStart_1 = document.getElementById('divStart_1');
  var divStop_1 = document.getElementById('divStop_1');
  var divOpen_1 = document.getElementById('divOpen_1')
  var divClose_1 = document.getElementById('divClose_1')
  var ddAuto_manual_coil_1 = document.getElementById('ddAuto_manual_coil_1')
  var divButtons_coil_1 = document.getElementById('divButtons_coil_1')

  var modo_coil_1 = document.getElementById('modo_coil_1');

  var bStart_1 = document.getElementById('bStart_1');
  var bStop_1 = document.getElementById('bStop_1');
  var bOpen_1 = document.getElementById('bOpen_1');
  var bClose_1 = document.getElementById('bClose_1');

  var img_coil_close_1 = document.getElementById('img_coil_close_1');
  var img_coil_open_1 = document.getElementById('img_coil_open_1');

 ddDrive_1.addEventListener('change', function() 
  {
      const selectedOption_1 = this.value;
      if (selectedOption_1 == 'auto')
      {
        divStart_1.removeAttribute("hidden");
        divStop_1.removeAttribute("hidden");
        divOpen_1.setAttribute("hidden", "hidden");
        divClose_1.setAttribute("hidden", "hidden");
      }
      else if (selectedOption_1 == 'manual')
      {
        divOpen_1.removeAttribute("hidden");
        divClose_1.removeAttribute("hidden");
        divStop_1.setAttribute("hidden", "hidden");
        divStart_1.setAttribute("hidden", "hidden");
      }

      bStart_1.disabled = false;
      bStop_1.disabled = false;
      bOpen_1.disabled = false;
      bClose_1.disabled = false;

      bStart_1.style.backgroundColor = "#143a51";
      bStop_1.style.backgroundColor = "#143a51";
      bOpen_1.style.backgroundColor = "#143a51";
      bClose_1.style.backgroundColor = "#143a51";

      bStart_1.style.fontSize = "14px";
      bStop_1.style.fontSize = "14px";
      bOpen_1.style.fontSize = "14px";
      bClose_1.style.fontSize = "14px";
  });

  function readToCoil_1() {
          $.ajax({
              url: '/show_read_coil_1/',
              success: function (data) {
                 var posCoil_1 = data.data1;
                 var i_coil_close_1 = document.getElementById('img_coil_close_1');
                 var i_coil_open_1 = document.getElementById('img_coil_open_1');

                 if (posCoil_1 == 'open')
                 {
                  i_coil_close_1.setAttribute("hidden", "hidden");
                  i_coil_open_1.removeAttribute("hidden");
                 }
                 else if (posCoil_1 == 'close')
                 {
                  i_coil_open_1.setAttribute("hidden", "hidden");
                  i_coil_close_1.removeAttribute("hidden"); 
                 }
              }
          });
    }

  function start_1() {
        $.ajax({
            url: '/show_start_coil_1/',
            success: function (data) {
            }
        });
        intervalId_1 = setInterval(readToCoil_1, 200);
        bStart_1.disabled = true;
        bStart_1.style.backgroundColor = "#6f6e6e";
        bStart_1.style.fontSize = "12px";
        bStop_1.disabled = false;
        bStop_1.style.backgroundColor = "#143a51";
        bStop_1.style.fontSize = "16px";
    }

  function stop_1() {
        $.ajax({
            url: '/show_stop_coil_1/',
            success: function (data) {
            }
        });
        clearInterval(intervalId_1);
        bStart_1.disabled = false;
        bStart_1.style.backgroundColor = "#143a51";
        bStart_1.style.fontSize = "16px";
        bStop_1.disabled = true;
        bStop_1.style.backgroundColor = "#6f6e6e";
        bStop_1.style.fontSize = "12px";
    }

  function openn_1() {
        $.ajax({
            url: '/show_open_coil_1/',
            success: function (data) {
            }
        });
        img_coil_open_1.removeAttribute("hidden");
        img_coil_close_1.setAttribute("hidden", "hidden");
        bOpen_1.disabled = true;
        bOpen_1.style.backgroundColor = "#6f6e6e";
        bOpen_1.style.fontSize = "12px";
        bClose_1.disabled = false;
        bClose_1.style.backgroundColor = "#143a51";
        bClose_1.style.fontSize = "16px"; 
    }

  function closee_1() {
        $.ajax({
            url: '/show_close_coil_1/',
            success: function (data) {
            }
        });
        img_coil_close_1.removeAttribute("hidden");
        img_coil_open_1.setAttribute("hidden", "hidden");
        bClose_1.disabled = true;
        bClose_1.style.backgroundColor = "#6f6e6e";
        bClose_1.style.fontSize = "12px";
        bOpen_1.disabled = false;
        bOpen_1.style.backgroundColor = "#143a51";
        bOpen_1.style.fontSize = "16px"; 
    }

    function showParams_1() {
      divParamsCafe_1.removeAttribute("hidden");
      divShowParamsCafe_1.setAttribute("hidden", "hidden");
      divHideParamsCafe_1.removeAttribute("hidden");
  }

  function hideParams_1() {
      divParamsCafe_1.setAttribute("hidden", "hidden");
      divHideParamsCafe_1.setAttribute("hidden", "hidden");
      divShowParamsCafe_1.removeAttribute("hidden");
  }
</script>
