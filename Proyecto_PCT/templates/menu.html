{% load static %}
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>POM</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
      <!-- Responsive-->
      <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
      <!-- fevicon -->
      <link rel="icon" href="{% static 'images/footer-logo.png' %}" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">

      <link rel="stylesheet" href="{% static 'css/jquery-ui.css' %}">
      <!-- Knob Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/jquery.rotaryswitch.css' %}" >

      <!-- Tweaks for older IEs-->
      <!--<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">--> 
      <!-- fonts -->
      <!--<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">--> 
      <!-- owl stylesheets --> 
      <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">--> 
      <!--<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />--> 
      <script src="{% static 'js/code.jquery.com_jquery-3.7.0.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'js/jquery-ui.min.js' %}"></script>
      <script src="{% static 'js/jquery.knob.min.js' %}"></script>
      <script src="{% static 'js/jquery.rotaryswitch.js'%}"></script>
   </head>
   </style>
   <body>
      <!-- header section start -->
      <div class="header_section haeder_main" style="background-color: aliceblue;">
         <div class="container-fluid">
            <nav class="navbar navbar-light bg-light justify-content-between">
               <div id="mySidenav" class="sidenav">
                  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                  <a href="../">Home</a>
                  <a href="/type_of_test/">Type of test</a>
                  <!-- Boton turn off -->
                  <button id="shutDown" class="setting-button" onclick="window.modalTurnOff_pct.showModal();">
                     <img src="{% static 'images/power.svg' %}" alt="Icono">
                   </button> 
               </div>
               <span style="font-size:30px;cursor:pointer; color: #fff;" onclick="openNav()"><img src="{% static 'images/toggle-icon.png' %}"></span>
               <a class="navbar-brand" href="index.html"><img src="{% static 'images/logo.png' %}"></a></a>
            </nav>
         </div>
      </div>
      <!-- header section end -->

      <!-- block section start -->
      <div class="container-fluid">
            {% block content %}

            {% endblock %}
      </div>


      <!-- block section start -->

      <!-- footer section start -->
      <div class="footer_section layout_padding margin_top_90 justify-content-center align-items-center">
         <div class="container">
            <div class="footer_logo_main" style="margin: 10px; justify-content: center;">
               <div class="computer_img" style="min-height: 0;"><img style="max-height: 150px;" src="{% static 'images/pom_bw.png' %}"></div>
            </div>
            <div class="footer_section_2" style="padding: 0px;">
               <div class="row">
                  <div class="col-lg-3 col-sm-6" style="width: auto;">
                     <a href="/def_settings/"><img src="{% static 'images/settings.svg' %}"></a></a>
                  </div>
                  <div class="col-lg-3 col-sm-6">
                     <h4 class="adderss_text">Contact</h4>
                     <div class="call_text"><img src="{% static 'images/map-icon.png' %}"><span class="paddlin_left_0"><a href="#">Cedar Grove, NJ 07009 USA</a></span></div>
                     <div class="call_text"><img src="{% static 'images/call-icon.png' %}"><span class="paddlin_left_0"><a href="#">(973) 256.3000</a></span></div>
                     <div class="call_text"><img src="{% static 'images/mail-icon.png' %}"><span class="paddlin_left_0"><a href="#">Email: info@plastomatic.com</a></span></div>
                  </div>
               </div>
            </div>
                  <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">2023 All Rights Reserved.</p>
         </div>
      </div>

      <!-- Modal -->
      <dialog id="modalTurnOff_pct">
         <h2>Shut down/Reboot PCT?</h2>
         <br>
         <form method="post" action="{% url 'Black' %}">
            {% csrf_token %}
            <button type="submit" class="css-button-eye" style="margin-right: 10px; border-radius: 0%; width:80px;" name="opcion_turnOff" value="shut_down">Shut down</button>
            <button type="submit" class="css-button-eye" style="margin-right: 10px; border-radius: 0%; width:80px;" name="opcion_turnOff" value="reboot">Reboot</button>
          </form>
          <button class="css-button-eye" style="margin-right: 10px; border-radius: 0%; width:80px;" onclick="window.modalTurnOff_pct.close();">
         Cancel
         </button>

      </dialog>
      <!-- copyright section end -->
         </div>
      </div>
      <!-- footer section end -->
      <!-- Javascript files-->
      <script>

      var cafe_up = document.getElementById('cafe_up');
      var cafe_down = document.getElementById('cafe_down');
      var alert_light = document.getElementById('alert_light');
      var agua = document.getElementById('agua');
      var levelSensor = document.getElementById('levelSensor');
      
      //Elementos para abrir CAFE
      var coloresOpen = ['blue', 'yellow']; // Lista de colores para el borde
      var indexOpen = 0; // Índice actual de color
      var intervaloOpen;

      //Elementos para cerrar CAFE
      var coloresClose = ['green', 'yellow']; // Lista de colores para el borde
      var indexClose = 0; // Índice actual de color
      var intervaloClose;

      //Elementos para Alerta
      var coloresAlert = ['red', 'yellow']; // Lista de colores para el borde
      var indexAlert = 0; // Índice actual de color
      var intervaloAlert;

      var valor = 0; // Inicializa el valor en 0
      var incrementando = true; 

      toggleCambioDeColorOpen();
      toggleCambioDeColorAlert();
      setTimeout(toggleCambioDeColorClose,600);
      setInterval(cambiarAlturaAleatoria, 600);

      //Funciones para abrir CAFE
      function cambiarColorOpen() {
         cafe_up.style.borderColor = coloresOpen[indexOpen];
         indexOpen = (indexOpen + 1) % coloresOpen.length; // Avanzar al siguiente color
      }

      function toggleCambioDeColorOpen() {
         if (intervaloOpen) {
         clearInterval(intervaloOpen); // Detener el cambio de color
         intervaloOpen = null;
         } else {
         cambiarColorOpen(); // Cambiar el color de inmediato
         intervaloOpen = setInterval(cambiarColorOpen, 600); // Cambiar cada 600 ms
         }
      }

      //Funciones para cerrar CAFE
      function cambiarColorClose() {
         cafe_down.style.borderColor = coloresClose[indexClose];
         indexClose = (indexClose + 1) % coloresClose.length; // Avanzar al siguiente color
      }

      function toggleCambioDeColorClose() {
         if (intervaloClose) {
         clearInterval(intervaloClose); // Detener el cambio de color
         intervaloClose = null;
         } else {
         cambiarColorClose(); // Cambiar el color de inmediato
         intervaloClose = setInterval(cambiarColorClose, 600); // Cambiar cada 600 ms
         }
      }

      //Funciones para Alerta
      function cambiarColorAlerta() {
         alert_light.style.backgroundColor = coloresAlert[indexAlert];
         indexAlert = (indexAlert + 1) % coloresAlert.length; // Avanzar al siguiente color
      }

      function toggleCambioDeColorAlert() {
         if (intervaloAlert) {
         clearInterval(intervaloAlert); // Detener el cambio de color
         intervaloAlert = null;
         } else {
            cambiarColorAlerta(); // Cambiar el color de inmediato
         intervaloAlert = setInterval(cambiarColorAlerta, 600); // Cambiar cada 600 ms
         }
      }
      
      //Funcion nivel de agua
      function cambiarAlturaAleatoria() {
         var alturaAleatoria = Math.floor(Math.random() * 101); // Genera un número aleatorio entre 0 y 100
         var posicion = 71 - valor/2 + 'px';
         if (incrementando) {
            valor += 5;
            if (valor > 100) {
               incrementando = false;
               valor = 100;
            }
            } else {
            valor -= 5;
            if (valor < 0) {
               incrementando = true;
               valor = 0;
            }
         }

         agua.style.height = valor + 'px'; // Establece la altura con el número generado
         agua.style.transform = `translate(${'-8%'}, ${posicion})`; // Establece la posición con el número generado
         levelSensor.innerHTML = valor + "%";
      }






         function shut_down_pct() {
            $.ajax({
                     type: "POST",
                     url: '/shut_down/',
                     data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
                     success: function (data) {
                     }
                  });
            }

         function reboot_pct() {
            $.ajax({
                     type: "POST",
                     url: '/reboot/',
                     data: {csrfmiddlewaretoken: '{{ csrf_token }}'},
                     success: function (data) {
                     }
                  });
         }

         function openNav() {
           document.getElementById("mySidenav").style.width = "100%";
         }
         
         function closeNav() {
           document.getElementById("mySidenav").style.width = "0";
         }
      </script> 
   </body>
</html>